---
// ThemeToggle component - Handles dark/light mode switching
---

<button
  id="theme-toggle"
  type="button"
  class="size-10 rounded-lg flex items-center justify-center text-ink-muted dark:text-cream-400 hover:bg-cream-200 dark:hover:bg-surface-dark hover:text-accent dark:hover:text-gold transition-all duration-200"
  aria-label="Toggle theme"
>
  <span class="material-symbols-outlined text-xl hidden dark:block" id="theme-icon-light">
    light_mode
  </span>
  <span class="material-symbols-outlined text-xl block dark:hidden" id="theme-icon-dark">
    dark_mode
  </span>
</button>

<script>
  // Theme toggle functionality
  function initThemeToggle() {
    const button = document.getElementById('theme-toggle');
    const html = document.documentElement;

    if (!button) return;

    button.addEventListener('click', () => {
      const currentTheme = html.classList.contains('dark') ? 'dark' : 'light';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

      if (newTheme === 'dark') {
        html.classList.add('dark');
      } else {
        html.classList.remove('dark');
      }

      localStorage.setItem('theme', newTheme);
    });
  }

  // Initialize on page load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initThemeToggle);
  } else {
    initThemeToggle();
  }

  // Re-initialize on view transitions (if using Astro view transitions)
  document.addEventListener('astro:page-load', initThemeToggle);
</script>

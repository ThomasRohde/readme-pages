---
interface Props {
  headings: Array<{
    depth: number;
    slug: string;
    text: string;
  }>;
}

const { headings } = Astro.props;

// Filter to only show h2 and h3
const tocHeadings = headings.filter(h => h.depth <= 3);
---

{tocHeadings.length > 0 && (
  <aside class="hidden xl:block w-64 shrink-0 sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto no-scrollbar py-10 pl-6 border-l border-slate-200 dark:border-border-dark/50">
    <h5 class="mb-4 text-sm font-semibold text-slate-900 dark:text-white flex items-center gap-2">
      On this page
    </h5>
    <ul class="space-y-3 text-sm">
      {tocHeadings.map((heading, index) => (
        <li class={heading.depth === 3 ? 'pl-4' : ''}>
          <a
            href={`#${heading.slug}`}
            class={`block text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200 transition-colors pl-3 border-l-2 ${index === 0 ? 'border-primary text-primary' : 'border-transparent'}`}
          >
            {heading.text}
          </a>
        </li>
      ))}
    </ul>
  </aside>
)}

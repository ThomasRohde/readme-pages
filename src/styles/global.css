@import "tailwindcss";

/* Tailwind v4 configuration */
@config "../../tailwind.config.mjs";

/* Dark mode variant */
@custom-variant dark (&:where(.dark, .dark *));

/* Skip to main content link - accessible keyboard navigation */
.skip-link {
    position: absolute;
    top: -100px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 9999;
    padding: 1rem 2rem;
    background: #137fec;
    color: white;
    font-weight: 600;
    text-decoration: none;
    border-radius: 0 0 0.375rem 0.375rem;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    transition: top 0.2s ease-in-out;
}

.skip-link:focus {
    top: 0;
    outline: 3px solid #fbbf24;
    outline-offset: 2px;
}

.skip-link:focus-visible {
    top: 0;
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}
::-webkit-scrollbar-track {
    background: transparent;
}
::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
}

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar-thumb {
    background: #334155;
}
.dark ::-webkit-scrollbar-thumb:hover {
    background: #475569;
}

/* Smooth scroll behavior for anchor links */
html {
    scroll-behavior: smooth;
}

/* Anchor links for headings */
.heading-anchor {
    text-decoration: none;
    margin-left: -1.5rem;
    padding-right: 0.25rem;
    color: #94a3b8;
    opacity: 0;
    transition: opacity 0.2s ease, color 0.2s ease;
}

.heading-anchor:hover {
    color: #137fec;
}

.heading-anchor .anchor-icon {
    font-weight: 400;
}

/* Show anchor link on heading hover or focus */
:is(h1, h2, h3, h4, h5, h6):hover .heading-anchor,
.heading-anchor:focus {
    opacity: 1;
}

/* Dark mode anchor links */
.dark .heading-anchor {
    color: #64748b;
}

.dark .heading-anchor:hover {
    color: #3b82f6;
}

/* Ensure headings with anchors have proper spacing */
.prose :is(h1, h2, h3, h4, h5, h6) {
    position: relative;
    scroll-margin-top: 5rem;
}

/* Hide scrollbar but allow scroll */
.no-scrollbar::-webkit-scrollbar {
    display: none;
}
.no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* Image optimization and styling */
.prose img,
.prose picture {
    @apply rounded-lg shadow-md my-6;
    max-width: 100%;
    height: auto;
}

.prose figure {
    @apply my-6;
}

.prose figcaption {
    @apply text-sm text-slate-600 dark:text-slate-400 text-center mt-2 italic;
}

/* Ensure images don't overflow their containers */
img {
    max-width: 100%;
    height: auto;
}

/* Image loading state - prevent layout shift */
img[loading="lazy"] {
    min-height: 200px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
}

.dark img[loading="lazy"] {
    background: linear-gradient(90deg, #1e293b 25%, #0f172a 50%, #1e293b 75%);
}
